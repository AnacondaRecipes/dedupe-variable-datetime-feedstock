{% set name = "dedupe-variable-datetime" %}
{% set version = "1.0.0" %}
{% set commit_id = "fcd36afd000641168d9ae369623df866eeac35f9" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/dedupeio/{{ name }}/archive/{{ commit_id }}.tar.gz
  sha256: de1ce2b8f7062eabb2f52872d871ce633bcee3935cdd8359ff26abd20bedb2a8
  # url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
  # sha256: ce86100f11f5c9060ff0df5bd1ed56286f91836b7ba211e194b79889d41a403b
  patches:
    - patches/0001-fix-dependencies.patch

build:
  number: 0
  skip: true  # [py<37]
  script: {{ PYTHON }} -m pip install . --no-deps --no-build-isolation -vv

requirements:
  build:
    - patch     # [not win]
    - m2-patch  # [win]
  host:
    - pip
    - python
    - setuptools
    - wheel
  run:
    - python
    - datetime-distance
    - dedupe >=2.0.23

test:
  imports:
    - dedupe.variables
  source_files:
    - tests
  requires:
    - pip
    - pytest
  commands:
    - pip check
    - pytest -v tests

about:
  home: https://github.com/dedupeio/dedupe-variable-datetime
  license: MIT
  license_file: LICENSE
  license_family: MIT
  summary: DateTime variable type for dedupe
  description: |
    DateTime variable for dedupe.

    Part of the Dedupe.io cloud service and open source toolset 
    for de-duplicating and finding fuzzy matches in your data.
  doc_url: https://github.com/dedupeio/dedupe-variable-datetime/blob/master/README.md
  dev_url: https://github.com/dedupeio/dedupe-variable-datetime

extra:
  recipe-maintainers:
    - osamples
    - izahn
